<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoDocument</title>
    <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet">
    <script src="{{ url_for('static', filename='htmx.js') }}"></script>
</head>

<body class="bg-gray-100 font-sans">
    <header class="bg-blue-600 text-white">
        <div class="container mx-auto px-4 py-4">
            <h1 class="text-3xl font-bold">AutoDocument(ation)</h1>
        </div>
    </header>


    <div class="grid grid-cols-7">

        <div class="col-span-1 self-start sticky top-0 justify-between border-e bg-white  h-screen">
            {% include 'side-menu.html' %}
        </div>

        <div class="col-span-6 flex-1 p-6 space-y-6">
            <h1 class="text-4xl font-bold">Sources</h1>

            <p>Sources are the inputs to a Workflow: Databases, Spreadsheets and Custom HTML forms for example. They can
                be chained together in order to use the data from one source in the next. Sources are either a form
                field, where the user is presented with a form at the start of the Workflow, a Single Record Source
                where the source is just a set of keys to values, or a Multi Record Source like a SQL query output or a
                spreadsheet with multiple rows.</p>


            <p class="font-bold text-xl">Steps</p>

            <p>When adding any Source, you choose the Step value to set the order of when the Source is loaded. If
                Source B requires some data from Source A, make sure Source B has a higher Step value than Source A.</p>

            <div class="py-5">
                <span class="flex items-center h-px flex-1 bg-black"></span>
            </div>

            <p class="font-bold text-xl">Single Record Source</p>
            <p>
                A Single Record Source is a the most simple Source. An example is a .csv file with a single line of
                data, e.g.:

            </p>
            <div class="overflow-x-auto">
                <table class="min-w-max divide-y-2 divide-gray-200 bg-white text-sm rounded">
                    <thead class="ltr:text-left">
                        <tr>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">Id</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">name</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">age</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">address</th>
                        </tr>
                    </thead>

                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">1</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">Darryl Kerrigan</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">48</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">3 Highview Crescent, Coolaroo</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>If this Source was added to a Workflow, then you could use the fields {{ '{{name}}, {{age}}'}} etc in the
                Outcome Templates.</p>

            <div class="py-5">
                <span class="flex items-center h-px flex-1 bg-black"></span>
            </div>

            <p class="font-bold text-xl">Multi Record Source</p>

            <p>Multi Record Sources are Sources where multiple sets of data are set to the same field names, for example
                a .csv with multiple lines:</p>

            <div class="overflow-x-auto">
                <table class="min-w-max divide-y-2 divide-gray-200 bg-white text-sm rounded">
                    <thead class="ltr:text-left">
                        <tr>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">Id</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">name</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">age</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900">address</th>
                        </tr>
                    </thead>

                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">1</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">Darryl Kerrigan</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">48</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">3 Highview Crescent, Coolaroo</td>
                        </tr>
                        <tr>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">2</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">Cliff Buxton</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">52</td>
                            <td class="whitespace-nowrap px-4 py-2 text-gray-700">Parkes Radio Telescope</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>Multi Record Sources are added as either a Splitter or set to a Field.</p>

            <p class="font-bold">Splitter</p>

            <p>Splitters will take any current data loaded by the other Sources, and generate new Workflows, one for
                each record in the Multi Record Source. For example with the above table, if you have a Form Field
                called "category" with a user submitted value of "A", then the first split workflow will have category =
                "A", name = "Darryl Kerrigan", etc, while the second will have category = "A", name = "Cliff Buxton" and
                so on.</p>

            <p>Use splitters to generate multiple outcomes in a single workflow based on the same template.</p>

            <p class="font-bold">Field</p>

            <p>When Field is selected, then the entire contents of the multi-record source is added to a single field,
                for example with the above table if we set the field name to be "characters" after adding the same
                category field, then the Workflow would have category = "A", characters = [(name="Darryl Kerrigan",
                ...), (name="Cliff Buxton", ...)] etc.</p>

            <p>You can loop over these values in templates to create lists or tables within the one template. See <a
                    href="{{ url_for('top.templating') }}" class="text-blue-600">Templating</a> for more details.</p>

            <div class="py-5">
                <span class="flex items-center h-px flex-1 bg-black"></span>
            </div>

            <p class="font-bold text-xl">Chaining</p>

            <p>Data loaded in a Source in a previous Step can be used in a later Source. For example, if you wanted to only create a document for a specific category of client in a database query, you could create a form field that asks for the category, and then use it in the subsequent query. For example the query could look like:</p>

            <p class="rounded bg-gray-800 p-1 text-gray-50"><code>SELECT client_id, Name from Client where Category = :category</code></p>

            <p>The <code>:category</code> marker in the query will be populated by the category selected in the previous source. Note: this is SQL Injection Safe.</p>

            <div class="py-5">
                <span class="flex items-center h-px flex-1 bg-black"></span>
            </div>

            <p class="font-bold text-xl">How it works</p>

            <p>AutoDocument works by building a "Dictionary" of Keys to Values as each source is loaded. One source might set "Name" to "Darryl Kerrigan", and the next might set something else. This dictionary is then used to populate the Outcome Documents by referencing the keys of the dictionary, such as "Name".</p>

        </div>
    </div>

</body>

</html>
