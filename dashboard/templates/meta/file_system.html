<!DOCTYPE html>
<html lang="en">

{% include "components/head.html" %}

<body class="bg-gray-100">
    <div class="flex flex-row flex-1">
        <!-- Sidebar -->
        {% include "components/side-menu.html" %}

        <!-- Content -->
        <div class="flex flex-col p-6 pt-6 gap-6 w-full">
            <h1 class="text-3xl font-semibold mb-4">Manage Filesystems</h1>

            <div class="border rounded p-4 bg-gray-50 flex flex-col gap-2">
                <p>
                    In order to mount a file system to AutoDocument, it needs to be first mounted on the host of the
                    AutoDocument Container, and then bound as a volume to the container.
                </p>
                <p>
                    For example, the host might mount a drive on FileSystemHost to <code>/mnt/business_drive</code> on
                    the container host using:
                </p>
                <p class="bg-gray-100 p-4 rounded text-sm text-gray-800 font-mono">
                    sudo mount -t nfs -o vers=4 FileSystemHost:/business_drive /mnt/business_drive
                </p>
                <p>
                    And then the container can be run with that drive being bound to the container as a bind volume:
                </p>
                <p class="bg-gray-100 p-4 rounded text-sm text-gray-800 font-mono overflow-x-auto">
                    docker run autodocument -p 4605:4605 -v /mnt/business_drive:/app/mnt/business_drive
                </p>
                <p>Now we can let AutoDocument know those drives are available using the forms below:</p>
            </div>


            <!-- Forms -->
            <div class="flex flex-row gap-2">

                <!-- Windows -->
                <div class="basis-1/2 border rounded p-4 flex flex-col gap-4 bg-gray-50">
                    <h1 class="text-2xl font-bold">Windows</h1>
                    <p><span class="font-bold">Container Path:</span> Where this drive is mounted in the <span
                            class="font-bold">container</span></p>
                    <p><span class="font-bold">Windows Path:</span> How this directory is known to your users (like
                        <span class="font-bold">N:\MyDrive</span>)
                    </p>
                    <table class="rounded-lg min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
                        <thead class="text-left">
                            <tr>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Container Path</th>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Windows Path</th>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left"></th>
                            </tr>
                        </thead>

                        <tbody class="divide-y divide-gray-200">

                            {% for fs in windows_filesystems %}
                            <tr>
                                <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ fs.LocalPath }}</td>
                                <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ fs.RemotePath }}</td>
                                <td class="whitespace-nowrap px-4 py-2">
                                    <a class="inline-block rounded px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-400 focus:relative"
                                        href="{{ url_for('meta.fs.delete', storage_instance_id=fs.Id )}}">delete</a>
                                </td>

                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>

                    <h1 class="text-2xl font-bold">Add New</h1>
                    <div class="border rounded-lg bg-white p-2">

                        <form method="POST" action="{{ url_for('meta.fs.add_windows') }}">
                            {{ windows_form.csrf_token }}
                            <div>
                            {{ windows_form.local_path.label(class='block font-medium text-gray-900') }}
                            {{ windows_form.local_path(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm') }}
                            </div>

                            <div>
                            {{ windows_form.remote_path.label(class='block font-medium text-gray-900') }}
                            {{ windows_form.remote_path(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm') }}
                            </div>

                            <div class="mt-1.5">
                                {{ windows_form.submit(class='mt-1.5 rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium
                                text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500') }}
                            </div>
                        </form>
                    </div>

                </div>

                <!-- Linux -->
                <div class="basis-1/2 border rounded p-4 flex flex-col gap-4 bg-gray-50">
                    <h1 class="text-2xl font-bold">Linux</h1>
                    <p><span class="font-bold">Container Path:</span> Where this drive is mounted in the <span
                            class="font-bold">container</span></p>
                    <p><span class="font-bold">Linux Path:</span> How this directory is known to your users (like
                        <span class="font-bold">/mnt/MyDrive</span>)
                    </p>
                    <table class="min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
                        <thead class="text-left">
                            <tr>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Container Path</th>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Linux Path</th>
                                <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left"></th>
                            </tr>
                        </thead>

                        <tbody class="divide-y divide-gray-200">

                            {% for fs in linux_filesystems %}
                            <tr>
                                <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ fs.LocalPath }}</td>
                                <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ fs.RemotePath }}</td>
                                <td class="whitespace-nowrap px-4 py-2">
                                    <a class="inline-block rounded px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-400 focus:relative"
                                        href="{{ url_for('meta.fs.delete', storage_instance_id=fs.Id )}}">delete</a>
                                </td>
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                    <h1 class="text-2xl font-bold">Add New</h1>
                    <div class="border rounded-lg bg-white p-2">

                        <form method="POST" action="{{ url_for('meta.fs.add_linux') }}">
                            {{ linux_form.csrf_token }}
                            <div>
                            {{ linux_form.local_path.label(class='block text font-medium text-gray-900') }}
                            {{ linux_form.local_path(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm') }}
                            </div>

                            <div>
                            {{ linux_form.remote_path.label(class='block text font-medium text-gray-900') }}
                            {{ linux_form.remote_path(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm') }}
                            </div>

                            <div class="mt-1.5">
                                {{ linux_form.submit(class='mt-1.5 rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium
                                text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500') }}
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
