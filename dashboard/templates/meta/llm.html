<!DOCTYPE html>
<html lang="en">

{% include "components/head.html" %}

<body class="bg-gray-100">
    <div class="flex flex-row flex-1">
        <!-- Sidebar -->
        {% include "components/side-menu.html" %}

        <!-- Content -->
        <div class="flex flex-col p-6 pt-6 gap-6 w-full">
            <h1 class="text-3xl font-semibold mb-4">Manage LLMs</h1>

            <div class="flex flex-row gap-6">
                <div class="basis-1/2">

                <table class="rounded-lg min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
                    <thead class="text-left">
                        <tr>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Provider</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Base URL</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">Model</th>
                            <th class="font-bold whitespace-nowrap px-4 py-2 text-gray-900 text-left">System Prompt Default</th>
                        </tr>
                    </thead>

                    <tbody class="divide-y divide-gray-200">

                        {% for llm in llms %}
                        <tr>
                            <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ llm.provider.CommonName }}</td>
                            <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ llm.BaseURL }}</td>
                            <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ llm.ModelName }}</td>
                            <td class="whitespace-nowrap px-4 py-2 font-medium text-gray-900">{{ llm.SystemPrompt }}</td>
                            <td class="whitespace-nowrap px-4 py-2">
                                <a class="inline-block rounded px-4 py-2 text-sm font-semibold text-white bg-red-500 hover:bg-red-400 focus:relative"
                                    href="{{ url_for('meta.llm.delete', llm_id=llm.Id )}}">delete</a>
                            </td>
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
                </div>
                <div class="basis-1/2">
                    <div class="p-2 rounded-lg border bg-white flex flex-col gap-2">
                        <h1 class="text-2xl mb-2">Add New LLM</h1>
                        <form method="POST" action="{{ url_for('meta.llm.add') }}">
                          {{ llm_form.csrf_token }}

                          <div class="flex justify-left gap-4">
                            <div>
                              <label for="llm" class="pt-4">Provider</label>
                              <select
                                id="provider"
                                name="provider"
                                class="mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm"
                                required
                              >
                                <option selected="true" disabled="disabled" value="">Select...</option>

                                {% for option in provider_options %}
                                <option value="{{ option[0] }}">{{ option[1] }}</option>
                                {% endfor %}
                              </select>
                            </div>

                          </div>

                          <div class="pb-4">
                            {{ llm_form.model.label(class='block text-sm font-medium text-gray-700') }}
                            {{ llm_form.model(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50
                            border-gray-300 text-gray-700 sm:text-sm') }}
                          </div>
                          
                          <div class="pb-4">
                            {{ llm_form.base_url.label(class='block text-sm font-medium text-gray-700') }}
                            {{ llm_form.base_url(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50
                            border-gray-300 text-gray-700 sm:text-sm') }}
                          </div>

                          <div class="pb-4">
                            {{ llm_form.api_key.label(class='block text-sm font-medium text-gray-700') }}
                            {{ llm_form.api_key(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50
                            border-gray-300 text-gray-700 sm:text-sm') }}
                          </div>

                          <div class="pb-4">
                            {{ llm_form.system_prompt.label(class='block text-sm font-medium text-gray-700') }}
                            {{ llm_form.system_prompt(class='mt-1.5 p-2 w-full rounded-lg bg-gray-50
                            border-gray-300 text-gray-700 sm:text-sm') }}
                          </div>

                          <div class="mt-1.5">
                            {{ llm_form.submit(class='mt-1.5 rounded border border-indigo-600
                            bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent
                            hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500')
                            }}
                          </div>
                        </form>
                    </div>
                </div>


            </div>
        </div>
    </div>
</body>

</html>
