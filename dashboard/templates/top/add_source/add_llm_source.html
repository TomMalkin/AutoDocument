{% extends "top/add_source_layout.html" %}

{% block title %} Add LLM Response to workflow {% endblock title %}

{% block content %}

<form method="POST" action="{{url_for('top.llm.add_llm_source_view', workflow_id=workflow_id)}}" enctype="multipart/form-data">
    {{ form.csrf_token }}

    <div class="border rounded bg-gray-50 p-4 flex items-center gap-4">
        <div class="text-green-500">
            {% include 'svg/important.html' %}
        </div>

        <div class="flex-col space-y-4">
            <div>
                <p>
                Get a response from an LLM and add the response to the workflow.
                </p>
            </div>

            <div>
                <p>
                Choose an LLM and build a prompt template using the usual templating options
                </p>
            </div>
            
            <div>
                <p>
                The Response from the LLM
                </p>
            </div>

        </div>
    </div>

    <div class="border rounded p-2 my-2 bg-gray-50">
        <div class="flex gap-4">
            {{ form.step.label(class='block mt-4 text-sm font-medium text-gray-900') }}
            {{ form.step(class='mt-1.5 p-2 w-24 rounded border-gray-200 sm:text-sm') }}
        </div>

        <div class="flex gap-4">
            {{ form.llm.label(class='block mt-4 text-sm font-medium text-gray-900') }}
                        <select class="mt-1.5 p-2 w-full rounded-lg bg-gray-50 border-gray-300 text-gray-700 sm:text-sm" hx-get="/snippet/get_system_prompt" hx-on::after-request="document.getElementById('system_prompt').placeholder = event.detail.xhr.responseText" hx-swap="none" hx-target="#system_prompt" hx-trigger="load, change" id="llm" name="llm"><option value="1">Ollama: tinyllama</option><option value="2">Ollama: llama3.2</option></select>
        </div>

        <div class="flex gap-4">
            {{ form.prompt_template.label(class='text-sm font-medium text-gray-700') }}
            {{ form.prompt_template(class='mt-2 p-2 w-full rounded-lg border-gray-200 align-top shadow-sm sm:text-sm', rows=4) }}
        </div>

        <div class="flex gap-4">
            {{ form.system_prompt.label(class='text-sm font-medium text-gray-700') }}
            {{ form.system_prompt(class='mt-2 p-2 w-full rounded-lg border-gray-200 align-top shadow-sm sm:text-sm', rows=4) }}
        </div>

        <div class="mb-3 flex gap-4">
            {{ form.field_name.label(class='block mt-4 text-sm font-medium text-gray-900') }} 
            {{ form.field_name(class='mt-1.5 p-2 w-full rounded-lg bg-white border-gray-300 text-gray-700 sm:text-sm') }}
        </div>

        <div class="mt-1.5">
            {{ form.submit(class='mt-1.5 rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium
            text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500') }}
        </div>
    </div>

</form>

{% endblock content %}
